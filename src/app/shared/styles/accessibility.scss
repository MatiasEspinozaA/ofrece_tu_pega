/**
 * Accessibility Styles
 * Global accessibility features for the application
 */

// Font Size Classes
html.font-small {
  font-size: 12px;

  .mat-toolbar {
    font-size: 13px !important;
  }

  .mat-list-item {
    font-size: 13px !important;
    min-height: 44px !important;
  }

  h1 { font-size: 1.5rem !important; }
  h2 { font-size: 1.3rem !important; }
  h3 { font-size: 1.1rem !important; }

  button {
    font-size: 12px !important;
    padding: 6px 12px !important;
  }
}

html.font-normal {
  font-size: 16px;
}

html.font-large {
  font-size: 20px;

  .mat-toolbar {
    font-size: 20px !important;
    min-height: 72px !important;
  }

  .mat-list-item {
    font-size: 20px !important;
    min-height: 64px !important;
    padding: 12px 16px !important;
  }

  .mat-icon {
    transform: scale(1.25);
  }

  h1 { font-size: 2.5rem !important; }
  h2 { font-size: 2rem !important; }
  h3 { font-size: 1.6rem !important; }

  button {
    font-size: 18px !important;
    padding: 14px 24px !important;
    min-height: 48px !important;
  }

  .mat-mdc-form-field {
    font-size: 18px !important;
  }
}

// High Contrast Mode
html.high-contrast {
  --color-primary: #0000ff;
  --color-accent: #ff0000;
  --color-warn: #ff0000;
  --color-success: #008000;

  // Make borders more visible
  * {
    border-width: 2px !important;
  }

  // Make text more visible
  body {
    font-weight: 600;
  }

  // Underline interactive elements
  button,
  a {
    text-decoration: underline;
    font-weight: 700;
  }

  // High contrast backgrounds
  .mat-toolbar {
    background-color: #000 !important;
    color: #fff !important;
    border-bottom: 3px solid #fff !important;
  }

  .mat-sidenav {
    background-color: #fff !important;
    color: #000 !important;
    border-right: 3px solid #000 !important;
  }

  .mat-list-item {
    border-bottom: 1px solid #000 !important;

    &.active {
      background-color: #000 !important;
      color: #fff !important;
      border-left: 5px solid #ff0 !important;
    }

    &:hover {
      background-color: #ffff00 !important;
      color: #000 !important;
    }
  }

  // Focus indicators
  *:focus,
  *:focus-visible {
    outline: 3px solid #ff0 !important;
    outline-offset: 3px !important;
  }

  // Cards and containers
  .mat-card,
  .crud-table-container {
    border: 3px solid #000 !important;
    background-color: #fff !important;
    color: #000 !important;
  }

  // Buttons
  .mat-button,
  .mat-raised-button,
  .mat-icon-button {
    border: 2px solid currentColor !important;
  }
}

// Dark Theme - Support both legacy class and new data-mode attribute
html.dark-theme,
html[data-mode="dark"],
[data-mode="dark"] {
  // Dark theme color tokens (fallback values, themes can override)
  --color-primary: #bb86fc;
  --color-accent: #03dac6;
  --color-warn: #cf6679;
  --color-success: #66bb6a;
  --color-info: #42a5f5;

  // Primary color variants for dark mode
  --color-primary-bg: rgba(187, 134, 252, 0.1);
  --color-primary-hover: rgba(187, 134, 252, 0.15);

  // Background colors (fallback values, themes can override)
  --bg-primary: #121212;
  --bg-secondary: #1e1e1e;
  --bg-tertiary: #2a2a2a;
  --bg-elevated: #2d2d2d;

  // Text colors (fallback values, themes can override)
  --text-primary: #ffffff;
  --text-secondary: #b3b3b3;
  --text-disabled: #666666;
  --text-inverse: #ffffff;

  // Border colors
  --border-color: #333333;
  --border-color-light: #404040;
  --border-color-dark: #505050;

  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  // Improve text contrast in dark mode
  h1, h2, h3, h4, h5, h6 {
    color: #ffffff !important;
    font-weight: 600 !important;
  }

  p, span, label {
    color: var(--text-primary);
  }

}

// Dark mode Material components - Applied when data-mode="dark" OR dark-theme class
html.dark-theme,
html[data-mode="dark"],
[data-mode="dark"] {
  // Material components dark mode
  .mat-sidenav {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
  }

  .mat-drawer-container {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  // Cards and containers
  .mat-card,
  .mat-mdc-card,
  .crud-table-container {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
  }

  // Tables
  .mat-table,
  .crud-table {
    background-color: var(--bg-secondary);
    color: var(--text-primary);

    th {
      background-color: var(--bg-tertiary) !important;
      color: var(--text-primary) !important;
    }

    .table-row:hover {
      background-color: var(--bg-tertiary) !important;
    }
  }

  // Forms
  .mat-form-field {
    .mat-mdc-input-element {
      color: var(--text-primary);
    }

    .mat-mdc-form-field-label {
      color: var(--text-secondary);
    }
  }

  // Menus and dialogs
  .mat-menu-panel,
  .mat-mdc-menu-panel {
    background-color: var(--bg-elevated) !important;

    .mat-menu-item,
    .mat-mdc-menu-item {
      color: var(--text-primary);

      &:hover {
        background-color: var(--bg-tertiary) !important;
      }
    }
  }

  .mat-dialog-container,
  .mat-mdc-dialog-container {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
  }

  // Lists
  .mat-list-item,
  .mat-nav-list a {
    color: var(--text-primary) !important;

    &:hover:not(.active) {
      background-color: var(--bg-tertiary) !important;
    }

    &.active {
      background-color: var(--color-primary-hover) !important;
      color: var(--color-primary) !important;
    }
  }

  // Dividers
  .mat-divider {
    border-color: var(--border-color) !important;
  }

  // Page specific
  .oferente-container {
    background-color: var(--bg-primary) !important;
  }

  .oferente-toolbar {
    background-color: var(--color-primary) !important;
    color: var(--text-inverse) !important;

    button, mat-icon, .breadcrumb, .breadcrumb-text, .breadcrumb-icon, .user-name {
      color: var(--text-inverse) !important;
    }
  }

  .oferente-sidenav {
    background-color: var(--bg-elevated) !important;
    border-right-color: var(--border-color) !important;

    .sidenav-header .brand {
      color: var(--color-primary) !important;

      .brand-title {
        color: var(--text-primary) !important;
      }
    }

    .nav-menu a {
      color: var(--text-primary) !important;

      mat-icon {
        color: var(--text-secondary) !important;
      }

      &.active {
        mat-icon {
          color: var(--color-primary) !important;
        }
      }
    }

    .plan-info {
      background-color: var(--color-primary-bg) !important;

      .plan-name {
        color: var(--text-primary) !important;
      }

      .plan-status {
        color: var(--text-secondary) !important;
      }
    }
  }

  .page-content {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
  }

  // Dashboard cards
  .stat-card,
  .action-card,
  .activity-card {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;

    .stat-value,
    h3 {
      color: var(--text-primary) !important;
    }

    .stat-label,
    p {
      color: var(--text-secondary) !important;
    }
  }

  // Dashboard page specific
  .dashboard-page {
    .page-header {
      h1 {
        color: #ffffff !important;
      }

      .subtitle {
        color: #e0e0e0 !important;
      }
    }

    .section h2 {
      color: #ffffff !important;
    }

    .stat-card {
      .stat-label {
        color: #b3b3b3 !important;
      }

      .stat-value {
        color: #ffffff !important;
      }
    }

    .action-card {
      h3 {
        color: #ffffff !important;
      }

      p {
        color: #b3b3b3 !important;
      }
    }

    .activity-card {
      .activity-item {
        border-bottom-color: #404040 !important;

        .activity-icon {
          background-color: rgba(103, 58, 183, 0.1) !important;
        }

        .activity-content {
          .activity-title {
            color: #ffffff !important;
            font-weight: 500 !important;
          }

          .activity-time {
            color: #b3b3b3 !important;
          }
        }
      }

      .empty-state {
        mat-icon {
          color: #666666 !important;
        }

        p {
          color: #999999 !important;
        }
      }
    }
  }

  // User menu
  .user-menu-header {
    background-color: var(--bg-tertiary) !important;

    .user-menu-name {
      color: var(--text-primary) !important;
    }

    .user-menu-email {
      color: var(--text-secondary) !important;
    }
  }

  // Badges and chips
  .badge,
  .mat-chip,
  .mat-mdc-chip {
    background-color: var(--color-accent) !important;
    color: var(--text-inverse) !important;
  }

  // Buttons
  .mat-mdc-raised-button,
  .mat-raised-button {
    &:not([color]) {
      background-color: var(--bg-tertiary);
      color: var(--text-primary);
    }
  }

  // Links
  a:not(.mat-button):not(.mat-mdc-button) {
    color: var(--color-primary);

    &:hover {
      color: var(--color-accent);
    }
  }

  // Scrollbars (webkit)
  ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  ::-webkit-scrollbar-track {
    background: var(--bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--bg-tertiary);
    border-radius: 6px;

    &:hover {
      background: var(--border-color-light);
    }
  }

  // Material components in dark mode
  .mat-mdc-slide-toggle {
    --mdc-switch-selected-track-color: var(--color-primary) !important;
    --mdc-switch-selected-handle-color: var(--color-primary) !important;
    --mdc-switch-unselected-track-color: var(--border-color) !important;
    --mdc-switch-unselected-handle-color: var(--text-secondary) !important;

    .mdc-switch__track {
      background-color: var(--border-color) !important;
    }

    &.mdc-switch--selected .mdc-switch__track {
      background-color: var(--color-primary) !important;
    }

    .mdc-label {
      color: var(--text-primary) !important;
    }
  }

  .mat-mdc-select-panel {
    background-color: var(--bg-elevated) !important;
  }

  .mat-mdc-option {
    color: var(--text-primary) !important;

    &:hover {
      background-color: var(--color-primary-hover) !important;
    }

    &.mdc-list-item--selected {
      background-color: var(--color-primary-bg) !important;
      color: var(--color-primary) !important;
    }
  }

  .mat-mdc-form-field {
    --mdc-outlined-text-field-label-text-color: var(--text-secondary) !important;
    --mdc-outlined-text-field-input-text-color: var(--text-primary) !important;
    --mdc-outlined-text-field-outline-color: var(--border-color) !important;
    --mdc-outlined-text-field-focus-outline-color: var(--color-primary) !important;

    .mat-mdc-select-arrow {
      color: var(--text-primary) !important;
    }
  }

  // Branding page specific
  .branding-page {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;

    .page-header {
      background-color: var(--bg-elevated) !important;
      border-color: var(--border-color) !important;

      h1 {
        color: var(--text-primary) !important;

        mat-icon {
          color: var(--color-primary) !important;
        }
      }

      .subtitle {
        color: var(--text-secondary) !important;
      }

      mat-slide-toggle {
        color: var(--text-primary) !important;

        .mdc-form-field {
          align-items: center !important;
        }

        .mdc-label {
          color: var(--text-primary) !important;
          display: flex !important;
          align-items: center !important;
        }

        mat-icon {
          color: var(--text-primary) !important;
        }
      }

      .font-selector {
        .mat-mdc-form-field-label {
          color: var(--text-primary) !important;

          mat-icon {
            color: var(--color-primary) !important;
          }
        }

        .mat-mdc-select-value {
          color: var(--text-primary) !important;
        }
      }
    }

    .section-header {
      h2 {
        color: var(--text-primary) !important;
      }

      p {
        color: var(--text-secondary) !important;
      }
    }
  }

  // Theme card component
  .theme-card {
    background-color: var(--bg-elevated) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;

    .mat-mdc-card-title,
    .mat-card-title {
      color: var(--text-primary) !important;
    }

    .mat-mdc-card-subtitle,
    .mat-card-subtitle {
      color: var(--text-secondary) !important;
    }

    &.active {
      border-color: var(--color-primary) !important;
      box-shadow: 0 0 0 3px var(--color-primary-bg) !important;
    }

    &:hover {
      border-color: var(--color-primary) !important;
    }
  }

  // Preview panel
  .preview-panel {
    background-color: var(--bg-elevated) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;

    .mat-mdc-card-title,
    .mat-card-title {
      color: var(--text-primary) !important;

      mat-icon {
        color: var(--color-primary) !important;
      }
    }

    .mat-mdc-card-subtitle,
    .mat-card-subtitle {
      color: var(--text-secondary) !important;
    }

    .mock-app {
      .mock-card-title {
        color: var(--text-primary) !important;
      }

      .mock-card-subtitle {
        color: var(--text-secondary) !important;
      }
    }
  }
}

// Light Theme - Ensure proper colors
html:not(.dark-theme),
[data-mode="light"] {
  // Override text-inverse for light mode (should be white, not black)
  --text-inverse: #ffffff;

  body {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
  }

  .page-content {
    background-color: var(--bg-secondary);
  }

  .oferente-container {
    background-color: var(--bg-secondary);
  }

  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
  }

  // Material components in light mode
  .mat-mdc-slide-toggle {
    --mdc-switch-selected-track-color: var(--color-primary) !important;
    --mdc-switch-selected-handle-color: var(--color-primary) !important;
    --mdc-switch-unselected-track-color: var(--border-color) !important;

    .mdc-label {
      color: var(--text-primary) !important;
    }
  }

  .mat-mdc-select-panel {
    background-color: var(--bg-elevated) !important;
  }

  .mat-mdc-option {
    color: var(--text-primary) !important;

    &:hover {
      background-color: var(--color-primary-hover) !important;
    }

    &.mdc-list-item--selected {
      background-color: var(--color-primary-bg) !important;
      color: var(--color-primary) !important;
    }
  }

  .mat-mdc-form-field {
    --mdc-outlined-text-field-label-text-color: var(--text-secondary) !important;
    --mdc-outlined-text-field-input-text-color: var(--text-primary) !important;
    --mdc-outlined-text-field-outline-color: var(--border-color) !important;
    --mdc-outlined-text-field-focus-outline-color: var(--color-primary) !important;

    .mat-mdc-select-arrow {
      color: var(--text-primary) !important;
    }

    .mat-mdc-select-value {
      color: var(--text-primary) !important;
    }
  }

  // Layout specific
  .oferente-toolbar {
    background-color: var(--color-primary) !important;
    color: var(--text-inverse) !important;

    button, mat-icon, .breadcrumb, .breadcrumb-text, .breadcrumb-icon {
      color: var(--text-inverse) !important;
    }
  }

  .oferente-sidenav {
    background-color: var(--bg-elevated) !important;
    border-right-color: var(--border-color) !important;

    .brand-title {
      color: var(--text-primary) !important;
    }

    .nav-menu a {
      color: var(--text-primary) !important;

      mat-icon {
        color: var(--text-secondary) !important;
      }

      &.active mat-icon {
        color: var(--color-primary) !important;
      }
    }

    .plan-name {
      color: var(--text-primary) !important;
    }

    .plan-status {
      color: var(--text-secondary) !important;
    }
  }

  .page-content {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
  }

  // Dashboard page in light mode
  .dashboard-page {
    .page-header {
      h1 {
        color: var(--text-primary) !important;
      }

      .subtitle {
        color: var(--text-secondary) !important;
      }
    }

    .section h2 {
      color: var(--text-primary) !important;
    }

    .activity-card {
      .activity-item {
        .activity-title {
          color: var(--text-primary) !important;
        }

        .activity-time {
          color: var(--text-secondary) !important;
        }
      }
    }

    .stat-card {
      .stat-label {
        color: var(--text-secondary) !important;
      }

      .stat-value {
        color: var(--text-primary) !important;
      }
    }

    .action-card {
      h3 {
        color: var(--text-primary) !important;
      }

      p {
        color: var(--text-secondary) !important;
      }
    }
  }

  // Table/CRUD components
  .crud-table {
    th {
      color: var(--text-primary) !important;
    }

    td {
      color: var(--text-primary) !important;
    }
  }

  .mat-mdc-header-cell {
    color: var(--text-primary) !important;
  }

  .mat-mdc-cell {
    color: var(--text-primary) !important;
  }

  // Generic text elements
  p, span, label, div {
    color: var(--text-primary);
  }

  .mat-mdc-card-title,
  .mat-card-title {
    color: var(--text-primary) !important;
  }

  .mat-mdc-card-subtitle,
  .mat-card-subtitle {
    color: var(--text-secondary) !important;
  }
}

// Tooltips - Always black background with white text (regardless of theme)
.mat-mdc-tooltip,
.mdc-tooltip {
  --mdc-plain-tooltip-container-color: #000000 !important;
  --mdc-plain-tooltip-supporting-text-color: #ffffff !important;
  background-color: #000000 !important;
  color: #ffffff !important;
}

.mat-mdc-tooltip .mdc-tooltip__surface,
.mdc-tooltip__surface {
  background-color: #000000 !important;
  color: #ffffff !important;
}

// Focus Visible Styles
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

// Skip to Main Content Link
.skip-to-main {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--color-primary);
  color: white;
  padding: 8px;
  text-decoration: none;
  z-index: 100;

  &:focus {
    top: 0;
  }
}
